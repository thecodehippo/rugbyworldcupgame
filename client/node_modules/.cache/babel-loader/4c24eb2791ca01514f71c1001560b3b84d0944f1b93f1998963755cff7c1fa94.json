{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _regeneratorRuntime from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useState,useEffect}from'react';import{roundBuilder}from'../Utils/roundBuilder';import RoundsCarousel from'./RoundsCarousel';import styled from\"styled-components\";import Fixtures from'./Fixtures';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var fixturesUrl='/api/fixtures';var currentRoundUrl=\"/api/currentRound\";var Homepage=function Homepage(){var _useState=useState([0]),_useState2=_slicedToArray(_useState,2),rounds=_useState2[0],setRounds=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentRound=_useState6[0],setCurrentRound=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),listOfPicks=_useState8[0],setListOfPicks=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var addPick=function addPick(newPick){var idTeamFromPick=newPick.substring(0,newPick.indexOf(\":\"));var filteredDuplicatePicks=listOfPicks.filter(function(j){var idTeamFromState=j.substring(0,j.indexOf(\":\"));return idTeamFromState!==idTeamFromPick;});setListOfPicks([].concat(_toConsumableArray(filteredDuplicatePicks),[newPick]));};var changeCurrentRound=function changeCurrentRound(event){var text=event.target.innerText;var roundNum=text.substring(text.length-1,text.length);setCurrentRound(parseInt(roundNum));};useEffect(function(){function createGame(){return _createGame.apply(this,arguments);}function _createGame(){_createGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var fixturesResponse,fixturesResult,currentRoundResponse,currentRoundResult;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(fixturesUrl);case 3:fixturesResponse=_context.sent;_context.next=6;return fixturesResponse.json();case 6:fixturesResult=_context.sent;setData(fixturesResult.data);_context.next=10;return fetch(currentRoundUrl);case 10:currentRoundResponse=_context.sent;_context.next=13;return currentRoundResponse.json();case 13:currentRoundResult=_context.sent;setCurrentRound(currentRoundResult);setRounds(roundBuilder(fixturesResult.data));_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 21:case\"end\":return _context.stop();}},_callee,null,[[0,18]]);}));return _createGame.apply(this,arguments);}createGame().then(function(){return setReady(true);});},[]);return/*#__PURE__*/_jsx(CanvasStyle,{children:ready?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RoundsCarousel,{currentRound:currentRound,rounds:rounds,changeRound:changeCurrentRound}),/*#__PURE__*/_jsx(Fixtures,{data:data,currentRound:currentRound,addPick:addPick})]}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading\"})});};export default Homepage;var CanvasStyle=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nborder: 1px solid black;\\nmax-width: 500px;\\nwidth: 100vw;\\nmargin: auto;\\n\"])));","map":{"version":3,"names":["React","useState","useEffect","roundBuilder","RoundsCarousel","styled","Fixtures","jsx","_jsx","jsxs","_jsxs","fixturesUrl","currentRoundUrl","Homepage","_useState","_useState2","_slicedToArray","rounds","setRounds","_useState3","_useState4","ready","setReady","_useState5","_useState6","currentRound","setCurrentRound","_useState7","_useState8","listOfPicks","setListOfPicks","_useState9","_useState10","data","setData","addPick","newPick","idTeamFromPick","substring","indexOf","filteredDuplicatePicks","filter","j","idTeamFromState","concat","_toConsumableArray","changeCurrentRound","event","text","target","innerText","roundNum","length","parseInt","createGame","_createGame","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fixturesResponse","fixturesResult","currentRoundResponse","currentRoundResult","wrap","_callee$","_context","prev","next","fetch","sent","json","t0","console","error","stop","then","CanvasStyle","children","changeRound","div","_templateObject","_taggedTemplateLiteral"],"sources":["/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/client/src/components/Homepage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { roundBuilder } from '../Utils/roundBuilder';\nimport RoundsCarousel from './RoundsCarousel';\nimport styled from \"styled-components\";\nimport Fixtures from './Fixtures';\n\nconst fixturesUrl = '/api/fixtures';\nconst currentRoundUrl = \"/api/currentRound\";\n\nconst Homepage = () => {\n    const [rounds, setRounds] = useState([0]);\n    const [ready, setReady] = useState(false);\n    const [currentRound, setCurrentRound] = useState(1);\n    const [listOfPicks, setListOfPicks] = useState([]);\n    const [data, setData] = useState();\n\n    const addPick = (newPick) => {\n        const idTeamFromPick = newPick.substring(0, newPick.indexOf(\":\"));\n\n        let filteredDuplicatePicks = listOfPicks.filter((j) => {\n            let idTeamFromState = j.substring(0, j.indexOf(\":\"));\n            return idTeamFromState !== idTeamFromPick;\n        });\n\n        setListOfPicks([...filteredDuplicatePicks, newPick]);\n    }\n\n    const changeCurrentRound = (event) => {\n        let text = event.target.innerText;\n        let roundNum = text.substring(text.length - 1, text.length);\n        setCurrentRound(parseInt(roundNum));\n    }\n\n    useEffect(() => {\n        async function createGame() {\n            try {\n                const fixturesResponse = await fetch(fixturesUrl);\n                const fixturesResult = await fixturesResponse.json();\n                setData(fixturesResult.data);\n\n                const currentRoundResponse = await fetch(currentRoundUrl);\n                const currentRoundResult = await currentRoundResponse.json();\n                setCurrentRound(currentRoundResult);\n\n                setRounds(roundBuilder(fixturesResult.data));\n            } catch (error) {\n                console.error(error);\n            }\n        }\n        createGame().then(() => setReady(true))\n     }, []);\n\n    return (\n        <CanvasStyle>\n            {ready ? \n            <div>\n                <RoundsCarousel currentRound={currentRound} rounds={rounds} changeRound={changeCurrentRound} /> \n                <Fixtures data={data} currentRound={currentRound} addPick={addPick}  />\n            </div>\n            : <div>Loading</div>}\n        </CanvasStyle>\n    )\n}\n\nexport default Homepage;\n\nconst CanvasStyle = styled.div`\nborder: 1px solid black;\nmax-width: 500px;\nwidth: 100vw;\nmargin: auto;\n`"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}