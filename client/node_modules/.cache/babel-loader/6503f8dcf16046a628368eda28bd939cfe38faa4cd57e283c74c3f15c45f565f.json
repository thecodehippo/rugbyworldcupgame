{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _regeneratorRuntime from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import React,{useState,useEffect}from'react';import{roundBuilder}from'../Utils/roundBuilder';import RoundsCarousel from'./RoundsCarousel';import styled from\"styled-components\";import Fixtures from'./Fixtures';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var url='/api/fixtures';var Homepage=function Homepage(){var _useState=useState([0]),_useState2=_slicedToArray(_useState,2),rounds=_useState2[0],setRounds=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentRound=_useState6[0],setCurrentRound=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),listOfPicks=_useState8[0],setListOfPicks=_useState8[1];var addPick=function addPick(newPick){var idTeamFromPick=newPick.substring(0,newPick.indexOf(\":\"));var filteredDuplicatePicks=listOfPicks.filter(function(j){var idTeamFromState=j.substring(0,j.indexOf(\":\"));return idTeamFromState!==idTeamFromPick;});setListOfPicks([].concat(_toConsumableArray(filteredDuplicatePicks),[newPick]));};var changeCurrentRound=function changeCurrentRound(event){var text=event.target.innerText;var roundNum=text.substring(text.length-1,text.length);setCurrentRound(parseInt(roundNum));};useEffect(function(){function createGame(){return _createGame.apply(this,arguments);}function _createGame(){_createGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.text();case 6:result=_context.sent;console.log(result);setRounds(roundBuilder(result));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return _createGame.apply(this,arguments);}createGame().then(function(){return setReady(true);});},[]);return/*#__PURE__*/_jsxs(CanvasStyle,{children:[ready?/*#__PURE__*/_jsx(RoundsCarousel,{currentRound:currentRound,rounds:rounds,changeRound:changeCurrentRound}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading\"}),/*#__PURE__*/_jsx(Fixtures,{data:data,currentRound:currentRound,addPick:addPick}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return console.log(listOfPicks);},children:\"Press Me\"})]});};export default Homepage;var CanvasStyle=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nborder: 1px solid black;\\nmax-width: 500px;\\nwidth: 100vw;\\nmargin: auto;\\n\"])));","map":{"version":3,"names":["React","useState","useEffect","roundBuilder","RoundsCarousel","styled","Fixtures","jsx","_jsx","jsxs","_jsxs","url","Homepage","_useState","_useState2","_slicedToArray","rounds","setRounds","_useState3","_useState4","ready","setReady","_useState5","_useState6","currentRound","setCurrentRound","_useState7","_useState8","listOfPicks","setListOfPicks","addPick","newPick","idTeamFromPick","substring","indexOf","filteredDuplicatePicks","filter","j","idTeamFromState","concat","_toConsumableArray","changeCurrentRound","event","text","target","innerText","roundNum","length","parseInt","createGame","_createGame","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","result","wrap","_callee$","_context","prev","next","fetch","sent","console","log","t0","error","stop","then","CanvasStyle","children","changeRound","data","onClick","div","_templateObject","_taggedTemplateLiteral"],"sources":["/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/client/src/components/Homepage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { roundBuilder } from '../Utils/roundBuilder';\nimport RoundsCarousel from './RoundsCarousel';\nimport styled from \"styled-components\";\nimport Fixtures from './Fixtures';\n\nconst url = '/api/fixtures';\n\nconst Homepage = () => {\n    const [rounds, setRounds] = useState([0]);\n    const [ready, setReady] = useState(false);\n    const [currentRound, setCurrentRound] = useState(1);\n    const [listOfPicks, setListOfPicks] = useState([]);\n\n    const addPick = (newPick) => {\n        const idTeamFromPick = newPick.substring(0, newPick.indexOf(\":\"));\n\n        let filteredDuplicatePicks = listOfPicks.filter((j) => {\n            let idTeamFromState = j.substring(0, j.indexOf(\":\"));\n            return idTeamFromState !== idTeamFromPick;\n        });\n\n        setListOfPicks([...filteredDuplicatePicks, newPick]);\n    }\n\n    const changeCurrentRound = (event) => {\n        let text = event.target.innerText;\n        let roundNum = text.substring(text.length - 1, text.length);\n        setCurrentRound(parseInt(roundNum));\n    }\n\n    useEffect(() => {\n        async function createGame() {\n            try {\n                const response = await fetch(url);\n                const result = await response.text();\n                console.log(result);\n                setRounds(roundBuilder(result));\n            } catch (error) {\n                console.error(error);\n            }\n        }\n        createGame().then(() => setReady(true))\n     }, []);\n\n    return (\n        <CanvasStyle>\n            {ready ? <RoundsCarousel currentRound={currentRound} rounds={rounds} changeRound={changeCurrentRound} /> : <div>Loading</div>}\n            <Fixtures data={data} currentRound={currentRound} addPick={addPick}  />\n            <button onClick={(() => console.log(listOfPicks))}>Press Me</button>\n        </CanvasStyle>\n    )\n}\n\nexport default Homepage;\n\nconst CanvasStyle = styled.div`\nborder: 1px solid black;\nmax-width: 500px;\nwidth: 100vw;\nmargin: auto;\n`"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}