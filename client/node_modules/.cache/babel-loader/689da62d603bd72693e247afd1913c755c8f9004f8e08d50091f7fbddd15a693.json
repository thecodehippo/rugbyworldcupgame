{"ast":null,"code":"var _jsxFileName = \"/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/client/src/components/Homepage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { roundBuilder } from '../Utils/roundBuilder';\nimport RoundsCarousel from './RoundsCarousel';\nimport styled from \"styled-components\";\nimport Fixtures from './Fixtures';\nimport BottomDrawer from './BottomDrawer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fixturesUrl = '/api/fixtures';\nconst currentRoundUrl = \"/api/currentRound\";\nconst submitPicksUrl = \"/api/picks\";\nconst Homepage = () => {\n  _s();\n  const [rounds, setRounds] = useState([0]);\n  const [ready, setReady] = useState(false);\n  const [currentRound, setCurrentRound] = useState(1);\n  const [currentRoundImmutable, setCurrentRoundImmutable] = useState();\n  const [listOfPicks, setListOfPicks] = useState([]);\n  const [data, setData] = useState();\n  const [submittedPicks, setSubmittedPicks] = useState(false);\n  const addPick = newPick => {\n    const idTeamFromPick = newPick.substring(0, newPick.indexOf(\":\"));\n    let filteredDuplicatePicks = listOfPicks.filter(j => {\n      let idTeamFromState = j.substring(0, j.indexOf(\":\"));\n      return idTeamFromState !== idTeamFromPick;\n    });\n    setListOfPicks([...filteredDuplicatePicks, newPick]);\n  };\n  function createBody(pickArr, alias) {\n    return {\n      alias: alias,\n      picks: pickArr\n    };\n  }\n  async function sendPicks(alias) {\n    let body = createBody(listOfPicks, alias);\n    fetch(submitPicksUrl, {\n      method: \"POST\",\n      mode: \"cors\",\n      body: body\n    });\n    setSubmittedPicks(true);\n  }\n  const changeCurrentRound = event => {\n    let text = event.target.innerText;\n    let roundNum = text.substring(text.length - 1, text.length);\n    setCurrentRound(parseInt(roundNum));\n  };\n  useEffect(() => {\n    async function createGame() {\n      try {\n        const fixturesResponse = await fetch(fixturesUrl);\n        const fixturesResult = await fixturesResponse.json();\n        setData(fixturesResult.data);\n        const currentRoundResponse = await fetch(currentRoundUrl);\n        const currentRoundResult = await currentRoundResponse.json();\n        setCurrentRound(currentRoundResult);\n        setCurrentRoundImmutable(currentRoundResult);\n        setRounds(roundBuilder(fixturesResult.data));\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    createGame().then(() => setReady(true));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CanvasStyle, {\n    children: [ready ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(RoundsCarousel, {\n        currentRound: currentRound,\n        rounds: rounds,\n        changeRound: changeCurrentRound,\n        currentRoundImmutable: currentRoundImmutable\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Fixtures, {\n        data: data,\n        listOfPicks: listOfPicks,\n        currentRound: currentRound,\n        addPick: addPick,\n        currentRoundImmutable: currentRoundImmutable\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }, this), listOfPicks.length > 0 ? /*#__PURE__*/_jsxDEV(BottomDrawer, {\n      submittedPicks: submittedPicks,\n      sendPicks: sendPicks,\n      picks: listOfPicks,\n      data: data.results,\n      currentRound: currentRound\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 39\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(Homepage, \"KxpdvO8hFFm/nmNrcPNy35+ZISE=\");\n_c = Homepage;\nexport default Homepage;\nconst CanvasStyle = styled.div`\n    border: 1px solid black;\n    max-width: 500px;\n    width: 100vw;\n    margin: auto;\n`;\n_c2 = CanvasStyle;\nvar _c, _c2;\n$RefreshReg$(_c, \"Homepage\");\n$RefreshReg$(_c2, \"CanvasStyle\");","map":{"version":3,"names":["React","useState","useEffect","roundBuilder","RoundsCarousel","styled","Fixtures","BottomDrawer","jsxDEV","_jsxDEV","fixturesUrl","currentRoundUrl","submitPicksUrl","Homepage","_s","rounds","setRounds","ready","setReady","currentRound","setCurrentRound","currentRoundImmutable","setCurrentRoundImmutable","listOfPicks","setListOfPicks","data","setData","submittedPicks","setSubmittedPicks","addPick","newPick","idTeamFromPick","substring","indexOf","filteredDuplicatePicks","filter","j","idTeamFromState","createBody","pickArr","alias","picks","sendPicks","body","fetch","method","mode","changeCurrentRound","event","text","target","innerText","roundNum","length","parseInt","createGame","fixturesResponse","fixturesResult","json","currentRoundResponse","currentRoundResult","error","console","then","CanvasStyle","children","changeRound","fileName","_jsxFileName","lineNumber","columnNumber","results","_c","div","_c2","$RefreshReg$"],"sources":["/Users/mark.holgate/Desktop/projects/Javascript/rugbyworldcupgame/client/src/components/Homepage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { roundBuilder } from '../Utils/roundBuilder';\nimport RoundsCarousel from './RoundsCarousel';\nimport styled from \"styled-components\";\nimport Fixtures from './Fixtures';\nimport BottomDrawer from './BottomDrawer';\n\nconst fixturesUrl = '/api/fixtures';\nconst currentRoundUrl = \"/api/currentRound\";\nconst submitPicksUrl = \"/api/picks\";\n\nconst Homepage = () => {\n    const [rounds, setRounds] = useState([0]);\n    const [ready, setReady] = useState(false);\n    const [currentRound, setCurrentRound] = useState(1);\n    const [currentRoundImmutable, setCurrentRoundImmutable] = useState()\n    const [listOfPicks, setListOfPicks] = useState([]);\n    const [data, setData] = useState();\n    const [submittedPicks, setSubmittedPicks] = useState(false);\n\n    const addPick = (newPick) => {\n        const idTeamFromPick = newPick.substring(0, newPick.indexOf(\":\"));\n\n        let filteredDuplicatePicks = listOfPicks.filter((j) => {\n            let idTeamFromState = j.substring(0, j.indexOf(\":\"));\n            return idTeamFromState !== idTeamFromPick;\n        });\n\n        setListOfPicks([...filteredDuplicatePicks, newPick]);\n        \n    }\n\n    function createBody(pickArr, alias) {\n        return {\n            alias: alias,\n            picks: pickArr\n        }\n    }\n\n    async function sendPicks(alias) {\n        let body = createBody(listOfPicks, alias);\n        fetch(submitPicksUrl, {\n            method: \"POST\",\n            mode: \"cors\",\n            body: body\n        })\n        setSubmittedPicks(true);\n    }\n\n    const changeCurrentRound = (event) => {\n        let text = event.target.innerText;\n        let roundNum = text.substring(text.length - 1, text.length);\n        setCurrentRound(parseInt(roundNum));\n    }\n\n    useEffect(() => {\n        async function createGame() {\n            try {\n                const fixturesResponse = await fetch(fixturesUrl);\n                const fixturesResult = await fixturesResponse.json();\n                setData(fixturesResult.data);\n\n                const currentRoundResponse = await fetch(currentRoundUrl);\n                const currentRoundResult = await currentRoundResponse.json();\n                setCurrentRound(currentRoundResult);\n                setCurrentRoundImmutable(currentRoundResult);\n\n                setRounds(roundBuilder(fixturesResult.data));\n\n            } catch (error) {\n                console.error(error);\n            }\n        }\n        createGame().then(() => setReady(true))\n     }, []);\n\n    return (\n        <CanvasStyle>\n            {ready ? \n            <div>\n                <RoundsCarousel currentRound={currentRound} rounds={rounds} changeRound={changeCurrentRound} currentRoundImmutable={currentRoundImmutable} /> \n                <Fixtures data={data} listOfPicks={listOfPicks} currentRound={currentRound} addPick={addPick} currentRoundImmutable={currentRoundImmutable}   />\n            </div>\n            : <div>Loading</div>}\n            {listOfPicks.length > 0 ? <BottomDrawer submittedPicks={submittedPicks} sendPicks={sendPicks} picks={listOfPicks} data={data.results} currentRound={currentRound} /> : null}\n        </CanvasStyle>\n    )\n}\n\nexport default Homepage;\n\nconst CanvasStyle = styled.div`\n    border: 1px solid black;\n    max-width: 500px;\n    width: 100vw;\n    margin: auto;\n`"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}